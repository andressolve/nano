<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salt and Stone — Life One: The Boy</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, serif;
            background: #1a1714;
            color: #f5f1e8;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Progress Bar */
        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 3px;
            background: linear-gradient(90deg, #5b8fa8, #c4a35a);
            width: 0%;
            transition: width 0.3s ease;
            z-index: 1000;
        }

        /* Reader */
        .reader {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 24px 16px;
        }

        .page-frame {
            max-width: 680px;
            width: 100%;
            position: relative;
        }

        .page-frame img {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 6px;
            box-shadow: 0 8px 40px rgba(0, 0, 0, 0.5);
            cursor: pointer;
            user-select: none;
            -webkit-user-drag: none;
        }

        /* Cover special styling */
        .page-frame.cover img {
            box-shadow: 0 12px 50px rgba(0, 0, 0, 0.6);
        }

        /* Navigation */
        .nav {
            max-width: 680px;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding: 0 4px;
        }

        .nav-btn {
            padding: 10px 24px;
            font-size: 15px;
            font-family: inherit;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            color: #f5f1e8;
            cursor: pointer;
            border-radius: 24px;
            transition: all 0.25s ease;
            letter-spacing: 0.5px;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.14);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }

        .nav-btn:disabled {
            opacity: 0.25;
            cursor: default;
            transform: none;
        }

        .page-info {
            font-size: 13px;
            color: rgba(245, 241, 232, 0.45);
            letter-spacing: 1px;
        }

        .page-title {
            text-align: center;
            margin-bottom: 14px;
            font-size: 14px;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            color: rgba(245, 241, 232, 0.4);
        }

        /* Home link */
        .home-link {
            position: fixed;
            top: 16px;
            left: 16px;
            font-size: 13px;
            color: rgba(245, 241, 232, 0.4);
            text-decoration: none;
            letter-spacing: 0.5px;
            transition: color 0.2s;
            z-index: 100;
        }

        .home-link:hover {
            color: rgba(245, 241, 232, 0.7);
        }

        /* Fade transition */
        .page-frame {
            opacity: 1;
            transition: opacity 0.25s ease;
        }

        .page-frame.fading {
            opacity: 0;
        }

        /* Mobile */
        @media (max-width: 768px) {
            .reader {
                padding: 16px 10px;
            }

            .nav-btn {
                padding: 10px 18px;
                font-size: 14px;
            }

            .home-link {
                top: 10px;
                left: 10px;
            }
        }

        @media (prefers-reduced-motion: reduce) {
            .page-frame, .progress-bar { transition: none; }
        }
    </style>
</head>
<body>

    <div class="progress-bar" id="progressBar"></div>
    <a class="home-link" href="../index.html">&larr; Stories</a>

    <div class="reader">
        <div class="page-title" id="pageTitle">Cover</div>
        <div class="page-frame" id="pageFrame">
            <img id="pageImg" src="pages/page-00-cover.png" alt="Salt and Stone — Cover" />
        </div>
        <div class="nav">
            <button class="nav-btn" id="prevBtn" onclick="prev()" disabled>&larr; Back</button>
            <span class="page-info" id="pageInfo">Cover</span>
            <button class="nav-btn" id="nextBtn" onclick="next()">Next &rarr;</button>
        </div>
    </div>

    <script>
        const pages = [
            { file: 'pages/page-00-cover.png', title: 'Cover', label: 'Cover' },
            { file: 'pages/page-01.png', title: 'Home', label: 'Page 1 of 15' },
            { file: 'pages/page-02.png', title: 'The Craft', label: 'Page 2 of 15' },
            { file: 'pages/page-03.png', title: 'Fire on the Water', label: 'Page 3 of 15' },
            { file: 'pages/page-04.png', title: 'The Choice', label: 'Page 4 of 15' },
            { file: 'pages/page-05.png', title: 'The Sea', label: 'Page 5 of 15' },
            { file: 'pages/page-06.png', title: 'The Storm and the Wreck', label: 'Page 6 of 15' },
            { file: 'pages/page-07.png', title: 'The Shore', label: 'Page 7 of 15' },
            { file: 'pages/page-08.png', title: 'Sidon', label: 'Page 8 of 15' },
            { file: 'pages/page-09.png', title: 'The Docks', label: 'Page 9 of 15' },
            { file: 'pages/page-10.png', title: 'Noticed', label: 'Page 10 of 15' },
            { file: 'pages/page-11.png', title: 'Apprentice', label: 'Page 11 of 15' },
            { file: 'pages/page-12.png', title: 'The Enemy Question', label: 'Page 12 of 15' },
            { file: 'pages/page-13.png', title: 'Staying', label: 'Page 13 of 15' },
            { file: 'pages/page-14.png', title: 'Building', label: 'Page 14 of 15' },
            { file: 'pages/page-15.png', title: 'The Sea Again', label: 'Page 15 of 15' },
            { file: 'pages/page-16-back-cover.png', title: 'Back Cover', label: 'Back Cover' },
        ];

        let current = 0;
        const img = document.getElementById('pageImg');
        const frame = document.getElementById('pageFrame');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const pageInfo = document.getElementById('pageInfo');
        const pageTitle = document.getElementById('pageTitle');
        const progressBar = document.getElementById('progressBar');

        function show(index) {
            frame.classList.add('fading');
            setTimeout(() => {
                current = index;
                const p = pages[current];
                img.src = p.file;
                img.alt = 'Salt and Stone — ' + p.title;
                pageTitle.textContent = p.title;
                pageInfo.textContent = p.label;
                prevBtn.disabled = current === 0;
                nextBtn.disabled = current === pages.length - 1;
                progressBar.style.width = (current / (pages.length - 1)) * 100 + '%';
                frame.classList.remove('fading');
                window.scrollTo(0, 0);
            }, 250);
        }

        function next() {
            if (current < pages.length - 1) show(current + 1);
        }

        function prev() {
            if (current > 0) show(current - 1);
        }

        // Click on image to advance
        img.addEventListener('click', function(e) {
            const rect = img.getBoundingClientRect();
            const x = e.clientX - rect.left;
            if (x < rect.width * 0.35) {
                prev();
            } else {
                next();
            }
        });

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); next(); }
            else if (e.key === 'ArrowLeft') { e.preventDefault(); prev(); }
        });

        // Touch swipe
        let touchStartX = 0;
        document.addEventListener('touchstart', function(e) {
            touchStartX = e.changedTouches[0].screenX;
        }, { passive: true });

        document.addEventListener('touchend', function(e) {
            const diff = touchStartX - e.changedTouches[0].screenX;
            if (Math.abs(diff) > 50) {
                if (diff > 0) next();
                else prev();
            }
        }, { passive: true });

        // Preload next image
        function preload() {
            if (current < pages.length - 1) {
                const link = document.createElement('link');
                link.rel = 'prefetch';
                link.href = pages[current + 1].file;
                document.head.appendChild(link);
            }
        }
        img.addEventListener('load', preload);
    </script>

</body>
</html>
